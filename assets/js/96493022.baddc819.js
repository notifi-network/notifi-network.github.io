"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[902],{9234:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>d});var i=n(4848),o=n(8453);const s={sidebar_position:3},r="Getting Started with Self-Hosted Messaging",a={id:"getting-started-with-self-hosted",title:"Getting Started with Self-Hosted Messaging",description:"In this second Getting Started guide, we will walk through the steps of",source:"@site/versioned_docs/version-2.0/getting-started-with-self-hosted.md",sourceDirName:".",slug:"/getting-started-with-self-hosted",permalink:"/docs/getting-started-with-self-hosted",draft:!1,unlisted:!1,editUrl:"https://github.com/notifi-network/notifi-network.github.io/blob/main/versioned_docs/version-2.0/getting-started-with-self-hosted.md",tags:[],version:"2.0",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Getting Started",permalink:"/docs/getting-started"},next:{title:"Getting Started with Notifi Hosted Development",permalink:"/docs/getting-started-with-notifi-hosted"}},l={},d=[{value:"Creating a Self-Hosted Topic",id:"creating-a-self-hosted-topic",level:2},{value:"Creating Templates For Your Topic",id:"creating-templates-for-your-topic",level:2},{value:"Subscribing To Your Topic",id:"subscribing-to-your-topic",level:2},{value:"Getting Your Server Credentials",id:"getting-your-server-credentials",level:2},{value:"Creating your Node JS Server",id:"creating-your-node-js-server",level:2},{value:"Next Steps",id:"next-steps",level:2},{value:"Style Your Notifications",id:"style-your-notifications",level:3},{value:"Adding Additional Destination Platforms",id:"adding-additional-destination-platforms",level:3},{value:"Sending On-Chain Notifications",id:"sending-on-chain-notifications",level:3},{value:"Additional resources",id:"additional-resources",level:3},{value:"Get Help",id:"get-help",level:3}];function c(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"getting-started-with-self-hosted-messaging",children:"Getting Started with Self-Hosted Messaging"}),"\n",(0,i.jsx)(t.p,{children:"In this second Getting Started guide, we will walk through the steps of\ncreating a Notifi messaging topic that receives messages sent from\nyour server, and sending a message from that topic."}),"\n",(0,i.jsxs)(t.p,{children:["This guide is intended as a follow-up to the first\n",(0,i.jsx)(t.a,{href:"./getting-started",children:"Getting Started"})," guide, which walks you through the\nprocess of creating a Notifi account and subscription card. It is highly\nrecommended that you follow that startup guide first."]}),"\n",(0,i.jsx)(t.h2,{id:"creating-a-self-hosted-topic",children:"Creating a Self-Hosted Topic"}),"\n",(0,i.jsxs)(t.p,{children:["Before we can publish messages from our server, we need to create a topic\nfor it first. To create a self-hosted message topic, go to the Alert Manager,\nclick ",(0,i.jsx)(t.strong,{children:"Create Topic"})," (or ",(0,i.jsx)(t.strong,{children:"+ Topic"})," if you already have a topic), then\n",(0,i.jsx)(t.strong,{children:"Send an alert triggered by an API call from my server"}),"."]}),"\n",(0,i.jsxs)(t.p,{children:["In the dialog box that appears, enter a name for your topic and click ",(0,i.jsx)(t.strong,{children:"Save Topic"}),".\nThere are other options available, but the default settings will be best for\nmost topics, so that's what we will go with for this guide."]}),"\n",(0,i.jsxs)(t.p,{children:['Once you click "Save Topic",\ntake note of the ',(0,i.jsx)(t.strong,{children:"Event Type ID"})," that appears next to the topic in the list - you\nwill use this to send messages to your topic later."]}),"\n",(0,i.jsx)(t.h2,{id:"creating-templates-for-your-topic",children:"Creating Templates For Your Topic"}),"\n",(0,i.jsx)(t.p,{children:"Before sending messages on this topic, you will need to create templates for it.\nTemplates allow you to add text to your messages that will appear every time, as well\nas add HTML or Markdown styling to your messages, so that when you actually send messages from your\nserver, you only need to include the data that changes each time. For this guide, we\nwill create relatively simple templates."}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["On the Alert Manager page, go to your newly created topic and click ",(0,i.jsx)(t.strong,{children:"Define Templates"}),"."]}),"\n",(0,i.jsxs)(t.li,{children:["In the dialog that appears, you'll be offered some text boxes for defining templates\nfor the subject line and content for your Alert History messages.","\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:'Select one of the available icons in the "Select Icon" dropdown'}),"\n",(0,i.jsxs)(t.li,{children:["In the ",(0,i.jsx)(t.strong,{children:"Subject"})," text box, enter ",(0,i.jsx)(t.code,{children:"{{eventdata.subject}}"})]}),"\n",(0,i.jsxs)(t.li,{children:["In the ",(0,i.jsx)(t.strong,{children:"HTML Content"})," text box, enter ",(0,i.jsx)(t.code,{children:"<span>{{eventdata.message}}</span>"})]}),"\n",(0,i.jsxs)(t.li,{children:["Click ",(0,i.jsx)(t.strong,{children:"Save"}),". You'll get a dialog box saying that the template has been uploaded."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["Click the ",(0,i.jsx)(t.strong,{children:"Email"})," button on the left. This will switch your view to editing\nemail templates.","\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["In the ",(0,i.jsx)(t.strong,{children:"Subject"})," text box, enter ",(0,i.jsx)(t.code,{children:"{{eventdata.subject}}"})]}),"\n",(0,i.jsxs)(t.li,{children:["In the ",(0,i.jsx)(t.strong,{children:"Custom HTML"})," text box, enter ",(0,i.jsx)(t.code,{children:"<p>{{eventdata.message}}</p>"})]}),"\n",(0,i.jsxs)(t.li,{children:["Click ",(0,i.jsx)(t.strong,{children:"Save"}),". You'll get a dialog box saying that the template has been uploaded."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.li,{children:"Click the circular X button on the top right to return to Alert Manager."}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"subscribing-to-your-topic",children:"Subscribing To Your Topic"}),"\n",(0,i.jsxs)(t.p,{children:["Once you have your topic and have defined templates for it, you can then add it to a React card\nto allow your users to subscribe. You can either create a new card for this (as outlined in\nthe instructions for ",(0,i.jsx)(t.a,{href:"./getting-started",children:"the previous guide"}),"), but we would highly recommend\nadding the topic to an existing card, so that all of your users (at least on the same chain)\ncan sign up for any or all of your topics at once."]}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["On the Alert Manager page, go to the ",(0,i.jsx)(t.strong,{children:"UI Config"})," tab and click on the card config you\nwant to add the topic to."]}),"\n",(0,i.jsxs)(t.li,{children:["Click ",(0,i.jsx)(t.strong,{children:"Select Topics"}),", then click the checkbox next to your new topic in the dialog box that appears."]}),"\n",(0,i.jsxs)(t.li,{children:["Click ",(0,i.jsx)(t.strong,{children:"Save"})," to close the dialog box, then click ",(0,i.jsx)(t.strong,{children:"Save Card"}),"."]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"Once you've done that, you can then go to your React app where you have added your card,\nlog in with your wallet, and subscribe to your new topic! The email address or other information\nyou used to sign up for the Community Manager topic will also be used here."}),"\n",(0,i.jsx)(t.h2,{id:"getting-your-server-credentials",children:"Getting Your Server Credentials"}),"\n",(0,i.jsx)(t.p,{children:"Before we move on to finally creating our server, we will need one more thing from Admin Portal:\nour server credentials. Notifi refers to these as your SID and Secret, which the server will need to\nprovide in order to log in and send messages."}),"\n",(0,i.jsxs)(t.p,{children:["To view your SID and Secret, go to the ",(0,i.jsx)(t.strong,{children:"Account Settings"})," page in Admin Portal, then click\n",(0,i.jsx)(t.strong,{children:"Show Sid/Secret"})," in the top-right corner. In the dialog box that appears, copy the contents\nof the Sid and Secret boxes somewhere safe - you will use these later when you create your server."]}),"\n",(0,i.jsx)(t.admonition,{type:"warning",children:(0,i.jsxs)(t.p,{children:["These credentials are only used for authenticating your own application on your own server to run\non your own behalf. Ensure that these credentials are stored somewhere secure, that the code using these\ncredentials is being run in a secure environment, and that these credentials\n",(0,i.jsx)(t.strong,{children:"are NEVER sent to a user's web browser"}),"."]})}),"\n",(0,i.jsx)(t.h2,{id:"creating-your-node-js-server",children:"Creating your Node JS Server"}),"\n",(0,i.jsxs)(t.p,{children:["Finally, we will create our server that will actually send our messages! Notifi provides a Node.js\nSDK for accessing Notifi's APIs and sending messages, which we will use for our server. (If you want to\nuse a different server technology, consult the documentation for our ",(0,i.jsx)(t.a,{href:"./alert-subscribe/graphql-api",children:"GraphQL API"}),"\nand our ",(0,i.jsx)(t.a,{href:"./alert-trigger/dataplane-api/",children:"Dataplane REST API"}),".)"]}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["Install ",(0,i.jsx)(t.a,{href:"https://nodejs.org/en",children:"Node.js"})," version 18 or later."]}),"\n",(0,i.jsxs)(t.li,{children:["Run ",(0,i.jsx)(t.code,{children:"$ npm init"})," in an empty directory to create your project"]}),"\n",(0,i.jsxs)(t.li,{children:["Run ",(0,i.jsx)(t.code,{children:"$ npm install @notifi-network/notifi-node"})," to add the ",(0,i.jsx)(t.a,{href:"https://www.npmjs.com/package/@notifi-network/notifi-node",children:"Notifi Node.js SDK"}),"\nto your project."]}),"\n",(0,i.jsxs)(t.li,{children:["Add ",(0,i.jsx)(t.code,{children:'"type": "module"'})," to your project's ",(0,i.jsx)(t.code,{children:"package.json"}),", since we will be using ES6 modules and top-level ",(0,i.jsx)(t.code,{children:"await"})]}),"\n",(0,i.jsxs)(t.li,{children:["Create a ",(0,i.jsx)(t.code,{children:"main.js"})," file with the following code:"]}),"\n"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-javascript",children:'// TODO: Add a code example\nimport {\n    NotifiClient,\n    NotifiEnvironment,\n    createNotifiService, \n    createDataplaneClient, \n    createGraphQLClient,\n} from \'@notifi-network/notifi-node\';\n\n// Enter your SID/Secret from Account Settings\n// and your Event Type ID from Alert Manager here.\n// This example assumes they are stored as environment variables\n// MY_SID, MY_SECRET, and MY_EVENT_TYPE_ID\nconst MY_SID = process.env.MY_SID;\nconst MY_SECRET = process.env.MY_SECRET;\nconst EVENT_TYPE_ID = process.env.MY_EVENT_TYPE_ID;\n\nconst gqlClient = createGraphQLClient("Production");\nconst notifiService = createNotifiService(gqlClient);\nconst dataplaneApiClient = createDataplaneClient("Production");\nconst client = new NotifiClient(notifiService, dataplaneApiClient);\n\nconst { token, expiry } = await client.logIn({\n    sid: MY_SID,\n    secret: MY_SECRET\n});\n\nawait client.publishFusionMessage(token, [{\n    eventTypeId: EVENT_TYPE_ID,\n    variablesJson: {\n        // Feel free to change this text to whatever you want\n        subject: "Test Subject",\n        message: "This is a test message"\n    }\n}]);\n'})}),"\n",(0,i.jsxs)(t.ol,{start:"6",children:["\n",(0,i.jsxs)(t.li,{children:["Run ",(0,i.jsx)(t.code,{children:"$ node main.js"})," to run your code!"]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"Once you've run your code, you should see an email received in the email address\nyou associated with your wallet, complete with your subject line and message!\nYou should also find the same message in your Alert History under your React card."}),"\n",(0,i.jsx)(t.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsx)(t.h3,{id:"style-your-notifications",children:"Style Your Notifications"}),"\n",(0,i.jsxs)(t.p,{children:["We created very basic templates for our messages, but Notifi's template system is\nalso capable of more advanced templates with additional and nested variables. Check\nout our ",(0,i.jsx)(t.a,{href:"./styling-your-notifications/",children:"template guide"})," for more information!"]}),"\n",(0,i.jsx)(t.h3,{id:"adding-additional-destination-platforms",children:"Adding Additional Destination Platforms"}),"\n",(0,i.jsx)(t.p,{children:"Notifi notifications can be delivered through email, Telegram, Discord, Slack,\nand more. A few of these platforms require you to supply a bot for Notifi to use.\nIt is also possible to send email via your own custom domain:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"./target-setup/tg-bot",children:"Set up a Telegram bot"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"./target-setup/discord-bot",children:"Set up a Discord bot"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"./target-setup/slack-integration",children:"Set up a Slack integration"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"./target-setup/email-domain",children:"Set up a custom email domain"})}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"sending-on-chain-notifications",children:"Sending On-Chain Notifications"}),"\n",(0,i.jsxs)(t.p,{children:["This guide covered how to send notifications from your own server. Notifi also offers\na service that allows you to host code that is run automatically on new on-chain events.\nCheck out our ",(0,i.jsx)(t.a,{href:"./getting-started-with-notifi-hosted",children:"Notifi-Hosted development"})," for more\ninformation!"]}),"\n",(0,i.jsx)(t.h3,{id:"additional-resources",children:"Additional resources"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Notifi ",(0,i.jsx)(t.a,{href:"https://notifi.network/blog",children:"Blog"})]}),"\n",(0,i.jsxs)(t.li,{children:["Notifi ",(0,i.jsx)(t.a,{href:"https://notifi.network/demos",children:"Demos"})]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.a,{href:"https://www.figma.com/proto/EDRHnzmXsLRrmM1VBc57Hw/Notifi-Slides?page-id=3859%3A1161&node-id=3859-1287&viewport=643%2C485%2C0.09&scaling=min-zoom&starting-point-node-id=3859%3A1287",children:"How To Guide"})," of our Community Manager and Admin Portal"]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"get-help",children:"Get Help"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["We use Jira as a ticketing platform to track issues, questions, and requests at Notifi. If you have anything that you need from us, please create a ",(0,i.jsx)(t.strong,{children:"support ticket"})," using the link ",(0,i.jsx)(t.a,{href:"https://notifi.atlassian.net/servicedesk/customer/portals",children:"here"})]}),"\n",(0,i.jsxs)(t.li,{children:["Reach out to the key ",(0,i.jsx)(t.a,{href:"https://docs.google.com/document/d/1zVu-8iXdz1mOGievDutJX4Fs_7RXqe19LdyK4LqNmTA",children:"Notifi contacts"})]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>a});var i=n(6540);const o={},s=i.createContext(o);function r(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);