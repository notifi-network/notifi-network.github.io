"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8311],{4003:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>l});var a=n(4848),s=n(8453);const i={sidebar_position:85},o="Styling Your Notifications",r={id:"styling-your-notifications/index",title:"Styling Your Notifications",description:"Once you create an automated topic,",source:"@site/versioned_docs/version-Release/styling-your-notifications/index.md",sourceDirName:"styling-your-notifications",slug:"/styling-your-notifications/",permalink:"/docs/styling-your-notifications/",draft:!1,unlisted:!1,editUrl:"https://github.com/notifi-network/notifi-network.github.io/blob/main/versioned_docs/version-Release/styling-your-notifications/index.md",tags:[],version:"Release",sidebarPosition:85,frontMatter:{sidebar_position:85},sidebar:"tutorialSidebar",previous:{title:"Wallet Integration",permalink:"/docs/target-setup/wallet-integration"},next:{title:"Notifi Templates Platform Reference",permalink:"/docs/styling-your-notifications/platform-reference"}},d={},l=[{value:"Editing Templates",id:"editing-templates",level:2},{value:"Templated Message Limits",id:"templated-message-limits",level:2},{value:"An Example",id:"an-example",level:2}];function c(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h1,{id:"styling-your-notifications",children:"Styling Your Notifications"}),"\n",(0,a.jsxs)(t.p,{children:["Once you create an ",(0,a.jsx)(t.a,{href:"/docs/getting-started-with-self-hosted",children:"automated topic"}),",\nyou will need to create ",(0,a.jsx)(t.em,{children:"templates"})," for it. A template defines the overall form of a message, including any styling and formatting,\nso that messages can be both formatted individually per target platform and so that messages can be sent without having to include the styling\nboilerplate every time."]}),"\n",(0,a.jsx)(t.admonition,{type:"note",children:(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.a,{href:"/docs/create-topics/announcements",children:"Community Manager"})," topics include their own templates, with template variables managed by\nCommunity Manager."]})}),"\n",(0,a.jsx)(t.h2,{id:"editing-templates",children:"Editing Templates"}),"\n",(0,a.jsxs)(t.p,{children:["To edit the template for a topic, find the topic under ",(0,a.jsx)(t.strong,{children:"Alert Manager"})," in Admin Portal,\nthen click ",(0,a.jsx)(t.strong,{children:"Define Templates"}),"."]}),"\n",(0,a.jsxs)(t.p,{children:["A new page will appear, allowing you to select a template type on the left and enter template\ncontent in the center. You can enter HTML for Alert History, Email, and Telegram; Markdown\nfor Discord and Slack, and plain text for SMS. You can also enter templates for the subject\nlines for the Alert History and Email templates. Once you have updated your template content\nfor a target type, click ",(0,a.jsx)(t.strong,{children:"Save"}),"."]}),"\n",(0,a.jsxs)(t.p,{children:["Notifi templates use the ",(0,a.jsx)(t.a,{href:"https://mustache.github.io/mustache.5.html",children:"Mustache"})," engine to\ntemplate messages. The variables you pass into the fusion message/event (such as through the\n",(0,a.jsx)(t.code,{children:"publishFusionMessage()"})," call in our nodejs sdk from your own hosted servers) or emitted from\n",(0,a.jsx)(t.code,{children:"Notifi Hosted Parsers"})," via the ",(0,a.jsx)(t.code,{children:"metadata"})," field are available through the ",(0,a.jsx)(t.code,{children:"{{eventData}}"})," object\nand can be navigated through dot syntax (e.g. a ",(0,a.jsx)(t.code,{children:"balance"})," variable can be accessed through\n",(0,a.jsx)(t.code,{children:"{{eventData.balance}}"}),"). For a full reference of all the other variables that are available,\nview the ",(0,a.jsx)(t.a,{href:"/docs/styling-your-notifications/variable-reference",children:"Notifi template variable reference"}),"."]}),"\n",(0,a.jsx)(t.h2,{id:"templated-message-limits",children:"Templated Message Limits"}),"\n",(0,a.jsxs)(t.p,{children:["Each platform has its own considerations for what format messages should be written in,\nthe maximum allowed message size, etc. These are detailed in the\n",(0,a.jsx)(t.a,{href:"/docs/styling-your-notifications/platform-reference",children:"Notifi template platform reference"}),"."]}),"\n",(0,a.jsx)(t.h2,{id:"an-example",children:"An Example"}),"\n",(0,a.jsx)(t.p,{children:"If we have this email template:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-html",children:'<!DOCTYPE html>\n<html lang="en">\n    <head>\n        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">\n    </head>\n    <body>\n        <h1>Balance Update</h1>\n        <p>A transaction has been recorded on the wallet with address {{eventData.walletAddress}}:</p>\n        <table>\n            <tr>\n                <td>Transaction Hash</td>\n                <td>{{eventData.txHash}}</td>\n            </tr>\n            <tr>\n                <td>Source</td>\n                <td>{{eventData.sourceAddress}}</td>\n            </tr>\n            <tr>\n                <td>Destination</td>\n                <td>{{eventData.destinationAddress}}</td>\n            </tr>\n            <tr>\n                <td>Token</td>\n                <td>{{eventData.tokenType}}</td>\n            </tr>\n            <tr>\n                <td>Amount</td>\n                <td>{{eventData.txAmount}}</td>\n            </tr>\n            <tr>\n                <td>Transaction Fee</td>\n                <td>{{eventData.txFee}}</td>\n            </tr>\n        </table>\n        <a style="text-size: 8pt;" href="{{unsubscribe_url}}">Unsubscribe</a>\n    </body>\n</html>\n'})}),"\n",(0,a.jsx)(t.p,{children:"and we make this call from the Notifi NodeJS SDK (note: no subscription value was provided, so it's assumed to be '*' which means all. Without specifying the specificWallets below, this message would be sent to everyone who is subscribed to this topic:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:'await client.publishFusionMessage(token, [{\n    eventTypeId: "abc123", // whatever the actual eventTypeId is\n    variablesJson: {\n        txHash: "0xe307bd8253f8cd78992b2ebcc6169f1af3e59cb7341f5ae1154809a2d9a4e15f",\n        walletAddress: "0xDa7C1116b53e13D74F4fAb3356A2032dFd12915B",\n        sourceAddress: "0xDa7C1116b53e13D74F4fAb3356A2032dFd12915B",\n        destinationAddress: "0x004fD37b5797158495c07D062D82969dCF3482c6",\n        tokenType: "MATIC",\n        txAmount: 0,\n        txFee: 0.002618999617286668\n    },\n    specificWallets: [{\n        walletPublicKey: "0xDa7C1116b53e13D74F4fAb3356A2032dFd12915B",\n        walletBlockchain: "POLYGON",\n    }]\n}]);\n'})}),"\n",(0,a.jsx)(t.p,{children:"let's show an example of the same data above, but without the specificWallets, and sending to anyone who wants to receive notifications for a specific subscription value (note: isCaseSensitive is false because we're comparing against an EVM address. Values and config are completely up to the developer! Just make sure to match against what your users are subscribing with to what is being sent from your server):"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:'await client.publishFusionMessage(token, [{\n    eventTypeId: "abc123", // whatever the actual eventTypeId is\n    variablesJson: {\n        txHash: "0xe307bd8253f8cd78992b2ebcc6169f1af3e59cb7341f5ae1154809a2d9a4e15f",\n        walletAddress: "0xDa7C1116b53e13D74F4fAb3356A2032dFd12915B",\n        sourceAddress: "0xDa7C1116b53e13D74F4fAb3356A2032dFd12915B",\n        destinationAddress: "0x004fD37b5797158495c07D062D82969dCF3482c6",\n        tokenType: "MATIC",\n        txAmount: 0,\n        txFee: 0.002618999617286668,\n        variablesJson: {\n            subscription: {\n                value: "0xDa7C1116b53e13D74F4fAb3356A2032dFd12915B",\n                isCaseSensitive: false\n            }\n        }\n    }\n}]);\n'})}),"\n",(0,a.jsx)(t.p,{children:"In case you're developing a Notifi Hosted parser, for the approach that doesn't ensure verified users with specificWallets you'd return one or many events formatted like:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:'const singleEvent = {\n    // Replace with actual event type ID. You can use GFT.getEvents().* to get the ID for a specific event type.\n    // Following the example above, the id property here would actually contain the value abc123\n    eventTypeId: GFT.validResponseEvents.SOME_TOPIC_THAT_YOU_CONFIGURED_FOR_THIS_PARSER_TO_EMIT.id,\n    // This should be a value that aligns to what you configured the event to be. * if nothing, or the wallet address of the user or account being alerted on\n    comparisonValue: "0xDa7C1116b53e13D74F4fAb3356A2032dFd12915B",\n    blockchain: GFT.ParserBlockchainType,\n    // Signature of the block, or your own custom signature that is unique for this invocation.\n    changeSignature: BLOCK_ID_OR_HASH,\n    // Metadata to pass through to the templates used for creating the actual notifications being sent out to users. This is also what contains filterVariables used in more advanced alert configs where users can enter thresholds\n    metadata: {\n        txHash: "0xe307bd8253f8cd78992b2ebcc6169f1af3e59cb7341f5ae1154809a2d9a4e15f",\n        walletAddress: "0xDa7C1116b53e13D74F4fAb3356A2032dFd12915B",\n        sourceAddress: "0xDa7C1116b53e13D74F4fAb3356A2032dFd12915B",\n        destinationAddress: "0x004fD37b5797158495c07D062D82969dCF3482c6",\n        tokenType: "MATIC",\n        txAmount: 0,\n        txFee: 0.002618999617286668,\n    },\n    // True for comparisonValues that are case sensitive such as Solana addresses, false for those that are not such as EVM addresses.\n    isComparisonValueCaseSensitive: false,\n  };\n'})}),"\n",(0,a.jsxs)(t.p,{children:["In case you're developing a Notifi Hosted parser, for the approach that ",(0,a.jsx)(t.em,{children:"DOES"})," ensure verified users with specificWallets you'd return one or many events formatted like (comparisonValue can be * here, unless you require further filtering). Note the double underscore prefix here when used in the parser:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:'const singleEvent = {\n    // Replace with actual event type ID. You can use GFT.getEvents().* to get the ID for a specific event type.\n    // Following the example above, the id property here would actually contain the value abc123\n    eventTypeId: GFT.validResponseEvents.SOME_TOPIC_THAT_YOU_CONFIGURED_FOR_THIS_PARSER_TO_EMIT.id,\n    // This should be a value that aligns to what you configured the event to be. * if nothing, or the wallet address of the user or account being alerted on\n    comparisonValue: "*",\n    blockchain: GFT.ParserBlockchainType,\n    // Signature of the block, or your own custom signature that is unique for this invocation.\n    changeSignature: BLOCK_ID_OR_HASH,\n    // Metadata to pass through to the templates used for creating the actual notifications being sent out to users. This is also what contains filterVariables used in more advanced alert configs where users can enter thresholds\n    metadata: {\n        txHash: "0xe307bd8253f8cd78992b2ebcc6169f1af3e59cb7341f5ae1154809a2d9a4e15f",\n        walletAddress: "0xDa7C1116b53e13D74F4fAb3356A2032dFd12915B",\n        sourceAddress: "0xDa7C1116b53e13D74F4fAb3356A2032dFd12915B",\n        destinationAddress: "0x004fD37b5797158495c07D062D82969dCF3482c6",\n        tokenType: "MATIC",\n        txAmount: 0,\n        txFee: 0.002618999617286668,\n        __specificWallets: [{\n            walletPublicKey: "0xDa7C1116b53e13D74F4fAb3356A2032dFd12915B",\n            walletBlockchain: "POLYGON",\n        }]\n    },\n    // True for comparisonValues that are case sensitive such as Solana addresses, false for those that are not such as EVM addresses.\n    isComparisonValueCaseSensitive: false,\n  };\n'})}),"\n",(0,a.jsx)(t.p,{children:"Notifi will send the following email:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-html",children:'<!DOCTYPE html>\n<html lang="en">\n    <head>\n        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">\n    </head>\n    <body>\n        <h1>Balance Update</h1>\n        <p>A transaction has been recorded on the wallet with address 0xDa7C1116b53e13D74F4fAb3356A2032dFd12915B:</p>\n        <table>\n            <tr>\n                <td>Transaction Hash</td>\n                <td>0xe307bd8253f8cd78992b2ebcc6169f1af3e59cb7341f5ae1154809a2d9a4e15f</td>\n            </tr>\n            <tr>\n                <td>Source</td>\n                <td>0xDa7C1116b53e13D74F4fAb3356A2032dFd12915B</td>\n            </tr>\n            <tr>\n                <td>Destination</td>\n                <td>0x004fD37b5797158495c07D062D82969dCF3482c6</td>\n            </tr>\n            <tr>\n                <td>Token</td>\n                <td>MATIC</td>\n            </tr>\n            <tr>\n                <td>Amount</td>\n                <td>0</td>\n            </tr>\n            <tr>\n                <td>Transaction Fee</td>\n                <td>0.002618999617286668</td>\n            </tr>\n        </table>\n        <a style="text-size: 8pt;" href="https://notifi.network/unsubscribe/?token=mV7hZcn7fCOJVZq33+M97bctdhmqUnC4RvQEoCaUSr1b3AXYk6CnEFf1/5gyby2mesyyXm8JLXzafoth9bXjgQ==">Unsubscribe</a>\n    </body>\n</html>\n'})})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>r});var a=n(6540);const s={},i=a.createContext(s);function o(e){const t=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),a.createElement(i.Provider,{value:t},e.children)}}}]);