"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4712],{7105:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>a,contentTitle:()=>s,default:()=>h,frontMatter:()=>n,metadata:()=>d,toc:()=>c});var r=i(4848),o=i(8453);const n={},s="Custom Discord bot",d={id:"target-setup/discord-bot",title:"Custom Discord bot",description:"In order to use your own Discord bot, you will need to set up your own Discord bot and Discord application client.",source:"@site/versioned_docs/version-Release/target-setup/discord-bot.md",sourceDirName:"target-setup",slug:"/target-setup/discord-bot",permalink:"/docs/target-setup/discord-bot",draft:!1,unlisted:!1,editUrl:"https://github.com/notifi-network/notifi-network.github.io/blob/main/versioned_docs/version-Release/target-setup/discord-bot.md",tags:[],version:"Release",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Setting Up Targets",permalink:"/docs/category/setting-up-targets"},next:{title:"Custom Email domain",permalink:"/docs/target-setup/email-domain"}},a={},c=[{value:"Discord Bot Configuration",id:"discord-bot-configuration",level:2},{value:"How to set up Discord bot",id:"how-to-set-up-discord-bot",level:3},{value:"1. Creating A Discord Bot",id:"1-creating-a-discord-bot",level:2},{value:"2. Register Your Interactions Url, Privacy Policy and Terms of Service",id:"2-register-your-interactions-url-privacy-policy-and-terms-of-service",level:2},{value:"3. Oauth Configuration",id:"3-oauth-configuration",level:2},{value:"3. Add Your Bot to your Server",id:"3-add-your-bot-to-your-server",level:2},{value:"Creating a Verification page",id:"creating-a-verification-page",level:2}];function l(e){const t={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"custom-discord-bot",children:"Custom Discord bot"}),"\n",(0,r.jsx)(t.p,{children:"In order to use your own Discord bot, you will need to set up your own Discord bot and Discord application client."}),"\n",(0,r.jsxs)(t.p,{children:["We also recommend setting up your own verification page, although it is possible to use a Notifi branded verification page. ",(0,r.jsx)(t.a,{href:"https://notifi.network/verify_discord",children:"See here for the Notifi verification page."})]}),"\n",(0,r.jsxs)(t.p,{children:["The verification page is ",(0,r.jsx)(t.strong,{children:"necessary"})," as part of OAuth2 to ensure that the user owns the Discord account and will look something like the screenshots below."]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"telegram-bot",src:i(9285).A+"",width:"701",height:"407"})}),"\n",(0,r.jsxs)(t.p,{children:["For setting up your verification page, see ",(0,r.jsx)(t.a,{href:"#verification-page",children:"here"})]}),"\n",(0,r.jsx)(t.h2,{id:"discord-bot-configuration",children:"Discord Bot Configuration"}),"\n",(0,r.jsx)(t.p,{children:"There are five pieces of information we will need in order to set up your custom Discord bot:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Discord Guild Id (the server id that your Discord bot will reside in. Internally, Discord calls servers guilds)"}),"\n",(0,r.jsx)(t.li,{children:"Discord Client Id"}),"\n",(0,r.jsx)(t.li,{children:"Discord Client Secret"}),"\n",(0,r.jsx)(t.li,{children:"Bot Token"}),"\n",(0,r.jsx)(t.li,{children:"Redirect URL (Verification Page Url)"}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"how-to-set-up-discord-bot",children:"How to set up Discord bot"}),"\n",(0,r.jsx)(t.h2,{id:"1-creating-a-discord-bot",children:"1. Creating A Discord Bot"}),"\n",(0,r.jsxs)(t.p,{children:["Visit:  ",(0,r.jsx)(t.a,{href:"https://discord.com/developers/applications",children:"https://discord.com/developers/applications"})]}),"\n",(0,r.jsx)(t.p,{children:"Create a new application:"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"telegram-bot",src:i(4503).A+"",width:"485",height:"169"})}),"\n",(0,r.jsx)(t.p,{children:"Enter a Bot Name (This will be the name of your Bot in the channel). Additionally you can configure your description, profile picture and Name."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"telegram-bot",src:i(5512).A+"",width:"412",height:"253"})}),"\n",(0,r.jsx)(t.h2,{id:"2-register-your-interactions-url-privacy-policy-and-terms-of-service",children:"2. Register Your Interactions Url, Privacy Policy and Terms of Service"}),"\n",(0,r.jsxs)(t.p,{children:["Terms of Service Url: ",(0,r.jsx)(t.a,{href:"https://notifi.network/terms",children:"https://notifi.network/terms"}),"\nPrivacy Policy: ",(0,r.jsx)(t.a,{href:"https://notifi.network/privacy",children:"https://notifi.network/privacy"}),"\nInteractions Url: ",(0,r.jsx)(t.a,{href:"https://dpapi.prd.notifi.network/hooks/DiscordCallback/**%7BYour",children:"https://dpapi.prd.notifi.network/hooks/DiscordCallback/**{Your"})," Client Id}**"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"telegram-bot",src:i(7229).A+"",width:"1327",height:"1226"})}),"\n",(0,r.jsx)(t.p,{children:"Ensure you save your changes. Discord will respond when you correctly verify the interactions URL."}),"\n",(0,r.jsx)(t.h2,{id:"3-oauth-configuration",children:"3. Oauth Configuration"}),"\n",(0,r.jsx)(t.p,{children:"Configure your redirect URl, and copy the relevant Client Id and Client Secret. Ensure you save your changes."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"telegram-bot",src:i(689).A+"",width:"1317",height:"1175"})}),"\n",(0,r.jsx)(t.h2,{id:"3-add-your-bot-to-your-server",children:"3. Add Your Bot to your Server"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"3.1 Copy your Bot Token"})}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"telegram-bot",src:i(9522).A+"",width:"1297",height:"777"})}),"\n",(0,r.jsx)(t.p,{children:"This token will be used to send messages on the bot\u2019s behalf. Don\u2019t reset the token after sending it to Notifi."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"3.2 Add your Bot to your server"})}),"\n",(0,r.jsxs)(t.p,{children:["Generate your OAuth Url by ",(0,r.jsx)(t.strong,{children:"navigating back to the OAuth Tab"})]}),"\n",(0,r.jsxs)(t.p,{children:["Select the following permissions for your bot. This is required for Discord in order for Notifi to programmatically send messages.\n",(0,r.jsx)(t.img,{alt:"telegram-bot",src:i(6109).A+"",width:"1107",height:"1217"})]}),"\n",(0,r.jsx)(t.p,{children:"Enter the link into your browser URL to add the Bot to your respective server."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"telegram-bot",src:i(8112).A+"",width:"849",height:"822"})}),"\n",(0,r.jsx)(t.p,{children:"If you intend to use Open Registration, you are not required to add the Bot into your server."}),"\n",(0,r.jsx)(t.p,{children:"Great! You're all set up."}),"\n",(0,r.jsx)(t.h2,{id:"creating-a-verification-page",children:"Creating a Verification page"}),"\n",(0,r.jsx)(t.p,{children:"For a verification page, set up a web page that is able take the url query paramaters and send them to Notifi\u2019s backend."}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsxs)(t.p,{children:["In this example, we will be using Notifi\u2019s landing page for Discord verification:\n",(0,r.jsx)(t.a,{href:"https://notifi.network/verify_discord/?code=8CHr7zrAnMCl0RjjdimsApop3M2SUT&state=cac809feb82147a9838ea49dddd9d6dd",children:"https://notifi.network/verify_discord/?code=8CHr7zrAnMCl0RjjdimsApop3M2SUT&state=cac809feb82147a9838ea49dddd9d6dd"})]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["The code and state will be taken out of the query parameter from the url. In this case, the ",(0,r.jsx)(t.strong,{children:"code"})," is ",(0,r.jsx)(t.code,{children:"8CHr7zrAnMCl0RjjdimsApop3M2SUT"})," and the ",(0,r.jsx)(t.strong,{children:"state"})," is ",(0,r.jsx)(t.code,{children:"cac809feb82147a9838ea49dddd9d6dd"}),"."]}),"\n",(0,r.jsxs)(t.p,{children:["The page will then construct the following GraphQL post request using the above information and send it to ",(0,r.jsx)(t.a,{href:"https://api.notifi.network/gql",children:"https://api.notifi.network/gql"}),"."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-graphql",children:'mutation verifyDiscordTarget($input: VerifyDiscordTargetInput!){\n  verifyDiscordTarget(verifyDiscordTargetInput: $input){\n    name,\n    id,\n    username,\n    discordAccountId,\n  }\n}\n\n{\n  "input": {\n    "discordTargetId": "cac809feb82147a9838ea49dddd9d6dd",\n    "code": "8CHr7zrAnMCl0RjjdimsApop3M2SUT",\n    "redirectUri": ""\n  }\n}\n\n'})}),"\n",(0,r.jsx)(t.p,{children:"Note: the state in the url parameters map to discordTargetId in the request."})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},9285:(e,t,i)=>{i.d(t,{A:()=>r});const r=i.p+"assets/images/1-439498abc85c300b9d03c6b463f8327c.png"},4503:(e,t,i)=>{i.d(t,{A:()=>r});const r=i.p+"assets/images/3-aa628965710bdf3004f8ca1b0f2c8e77.png"},5512:(e,t,i)=>{i.d(t,{A:()=>r});const r=i.p+"assets/images/4-6cc323e4014b5448279596d5cb19cfb4.png"},6109:(e,t,i)=>{i.d(t,{A:()=>r});const r=i.p+"assets/images/botconfig-f58b46223dd43a2edb8a7ff82d31bffd.png"},9522:(e,t,i)=>{i.d(t,{A:()=>r});const r=i.p+"assets/images/botlocation-7a9e0881703a68227a2bb96d8769b65b.png"},7229:(e,t,i)=>{i.d(t,{A:()=>r});const r=i.p+"assets/images/interactions-b465e61fcc408bb4d5f798670fdd4b39.png"},689:(e,t,i)=>{i.d(t,{A:()=>r});const r=i.p+"assets/images/oauth-45aa96a2d08718922cff140e0cdada5f.png"},8112:(e,t,i)=>{i.d(t,{A:()=>r});const r=i.p+"assets/images/add-bot-modal-79998ba989327b511edf0589e182f0fc.png"},8453:(e,t,i)=>{i.d(t,{R:()=>s,x:()=>d});var r=i(6540);const o={},n=r.createContext(o);function s(e){const t=r.useContext(n);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(n.Provider,{value:t},e.children)}}}]);